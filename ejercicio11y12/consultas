11) Crear un stored procedure que sirva para agregar una reparación, junto con una revisión de un empleado
(REVISIONREPARACION) y un repuesto (REPUESTOREPARACION) relacionados dentro de una sola
transacción. El stored procedure debe recibir los siguientes parámetros: dniCliente, codSucursal,
fechaReparacion, cantDiasReparacion, telefonoReparacion, empleadoReparacion, repuestoReparacion.

Como hacer si un repuesto tiene 2 emppleados para reparacion(revisionreparacion).
por ejemplo :
call store_(1009443,100,2013-12-14 12:20:31,‘Maidana’,‘bomba de combustible’,4,4243-4255)
call store_(1009443,100,2013-12-14 12:20:31,‘Juan’,‘bomba de combustible’,4,4243-4255)

o en el caso de que un cliente tenga 2 repuetsos, y 2 empleados para reparacion, serian la combinacion de todos ellos y llamar al SP

CREATE DEFINER=`reparacion`@`localhost` PROCEDURE `revision_repuesto`(
in P_dniCliente int(11),in P_codSucursal int(11), 
in P_fechaReparacion datetime, P_cantDiasReparacion int(11),
in P_telefonoReparacion varchar(45),in P_empleadoReparacion varchar(30),in P_repuestoReparacion varchar(30))
BEGIN
declare dir varchar(255);
declare ciudad varchar(255);
declare tarjeta varchar(255);
select C.domicioleCliente,C.ciuedadCliente,C.tarjetaPrimaria into @dir,@ciudad,@tarjeta 
from reparacion.cliente as C 
where C.dniCliente=P_dnicliente;
-- faltan parametros: direccionreparacioncliente,ciudad reparacionclientes (conseguibles mediante consulta)
-- pero tarjeta de reparacion debe recibirse como parametro, con cual pagaria llegado el caso

start transaction;
insert into reparacion.reparacion (`codSucursal`,`dniCliente`,`fechaInicioReparacion`, `cantDiasReparacion`,
 `telefonoReparacionCliente`, `direccionReparacionCliente`, `ciudadReparacionCliente`, `tarjetaReparacion`) 
values (P_codSucursal,dnicliente,P_fechaReparacion,P_cantDiasReparacion,
P_telefonoReparacion,dir,ciudad,tarjeta);

insert into reparacion.repuestoreparacion (`dniCliente`,`fechaInicioReparacion`,`repuestoReparacion`)
values (P_dniCliente,P_fechaReparacion,P_repuestoReparacion);

insert into reparacion.revisionreparacion (`dniCliente`,`fechaInicioReparacion`,`empleadoReparacion`) 
values (P_dniCliente,P_fechaReparacion,P_empleadoReparacion);

commit; 
END



12) Ejecutar el stored procedure del punto 11 con los siguientes datos:
dniCliente: 1009443
codSucursal: 100
fechaReparacion: 2013-12-14 12:20:31
empleadoReparacion: ‘Maidana’
repuestoReparacion: ‘bomba de combustible’
cantDiasReparacion: 4
telefonoReparacion: 4243-4255

call store_(1009443,100,2013-12-14 12:20:31,‘Maidana’,‘bomba de combustible’,4,4243-4255)